===================
If
===================

#if @test@ == "1"
#define a 1
#define a 2
#elif @test@ == 2
#define a 1
#elif @test@ == "@test@"
#else
#define a 1
#endif

---

(source_file
  (sharp_if_top_statement
    (sharp_command_name)
    condition: (binop_expr
      (at_reference)
      (string
        (string_fragment)))
    consequence: (sharp_command_statement
      (define_micro
        (sharp_command_name)
        name: (identifier)
        value: (number)))
    consequence: (sharp_command_statement
      (define_micro
        (sharp_command_name)
        name: (identifier)
        value: (number)))
    alternative: (sharp_elif_top_clause
      (sharp_command_name)
      condition: (binop_expr
        (at_reference)
        (number))
      consequence: (sharp_command_statement
        (define_micro
          (sharp_command_name)
          name: (identifier)
          value: (number))))
    alternative: (sharp_elif_top_clause
      (sharp_command_name)
      condition: (binop_expr
        (at_reference)
        (string
          (at_reference))))
    alternative: (sharp_else_top_clause
      (sharp_command_name)
      consequence: (sharp_command_statement
        (define_micro
          (sharp_command_name)
          name: (identifier)
          value: (number))))
    (sharp_command_name)))

===================
Nested If
===================

#if @test@ == "1"
  #if @nested@ == "2"
    #define a 1
    #define a -1
  #else
    #define b 2
  #endif
#else
  #define c 3
#endif

---

(source_file
  (sharp_if_top_statement
    (sharp_command_name)
    condition: (binop_expr
      (at_reference)
      (string
        (string_fragment)))
    consequence: (sharp_if_top_statement
      (sharp_command_name)
      condition: (binop_expr
        (at_reference)
        (string
          (string_fragment)))
      consequence: (sharp_command_statement
        (define_micro
          (sharp_command_name)
          name: (identifier)
          value: (number)))
      consequence: (sharp_command_statement
        (define_micro
          (sharp_command_name)
          name: (identifier)
          value: (unary_expr
            (number))))
      alternative: (sharp_else_top_clause
        (sharp_command_name)
        consequence: (sharp_command_statement
          (define_micro
            (sharp_command_name)
            name: (identifier)
            value: (number))))
      (sharp_command_name))
    alternative: (sharp_else_top_clause
      (sharp_command_name)
      consequence: (sharp_command_statement
        (define_micro
          (sharp_command_name)
          name: (identifier)
          value: (number))))
    (sharp_command_name)))

===================
If without statements
===================

#if 1
#elif 0
#else
#endif

---

(source_file
  (sharp_if_top_statement
    (sharp_command_name)
    condition: (number)
    alternative: (sharp_elif_top_clause
      (sharp_command_name)
      condition: (number))
    alternative: (sharp_else_top_clause
      (sharp_command_name))
    (sharp_command_name)))
